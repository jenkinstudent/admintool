<app-breadcrumbs title="{{'Dashboard' | translate}}"></app-breadcrumbs>

<div class="row project-wrapper pt-2">
    
    <div class="col-xxl-10 col-xl-10 col-lg-12 col-md-12 col-sm-12 col-xs-12 h-100">
        <div class="card card-height-100 mb-0" style="background-color: transparent; box-shadow:unset;">
            <div class="row">
                <div class="col-xl-3 col-md-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="card  card-height-100" style="background-color: #1e1e1e;">
                        <div class="card-body" style="padding:10px">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                        <img src="assets/images/new/TotalEmployees.png" width="60px">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <p class="text-white fs-18 kpi" style="margin-bottom: unset !important;">{{'Total Employees' | translate}}</p>
                                    <h2 class="mt-1 fw-medium text-white">{{employeesL}}</h2>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div>
                </div> <!-- end col-->
                <div class="col-xl-3 col-md-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="card  card-height-100 cursor-pointer" style="background-color: #1e1e1e;" [routerLink]="['/pages/my-programmes']">
                        <div class="card-body" style="padding:10px">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                        <img src="assets/images/new/TotalProgramms.png" width="60px">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <p class="text-white fs-18 kpi" style="margin-bottom: unset !important;">{{'Total Programmes' | translate}}</p>
                                    <h2 class="mt-1 fw-medium text-white">{{programmesL}}</h2>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div>
                </div> <!-- end col-->
                <div class="col-xl-3 col-md-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="card  card-height-100 cursor-pointer" style="background-color: #1e1e1e;" [routerLink]="['/pages/my-modules']">
                        <div class="card-body" style="padding:10px">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <img src="assets/images/new/TotalModule.png" width="60px">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <p class="text-white fs-18 kpi" style="margin-bottom: unset !important;">{{'Total Modules' | translate}}</p>
                                    <h2 class="mt-1 fw-medium text-white">{{modulesL}}</h2>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div>
                </div> <!-- end col-->
                <div class="col-xl-3  col-md-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="card  card-height-100 cursor-pointer" style="background-color: #1e1e1e;" [routerLink]="['/pages/my-learning-activities']">
                        <div class="card-body" style="padding:10px">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <img src="assets/images/new/learningactivity.png" width="60px">
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <p class="text-white fs-18 kpi" style="margin-bottom: unset !important;">{{'Learning Activities' | translate}}</p>
                                    <h2 class="mt-1 fw-medium text-white">{{activitiesL}}</h2>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div>
                </div> <!-- end col-->
            </div> <!-- end row-->
                <!---->
            <div class="row">
                <div class="col-lg-9 col-md-12 col-lg-9 col-sm-12 col-xs-12">
                    <div class="card card-height-100 mb-0" style="background-color: transparent; box-shadow:unset;">
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <div class="card card-height-100 pcard rounded rounded-3">
                                    <div class="card-body" style="padding: 25px 10px;">
                                        <div class="row">
                                            <div class="col-lg-4 col-md-3">
                                                <h4 class="fs-19 mt-2" style="font-weight: unset;margin-left: 14px;">{{'Recent Programmes' | translate}}</h4>
                                            </div>
                                            <div class="col-lg-8 col-md-9">
                                                <div class="row">
                                                    <ng-container *ngFor="let item of programmes;let i=index">
                                                        <div class="col-lg-6 col-md-6" *ngIf="i < 2">
                                                            <div class="card" id="box" style="background-color: #d1d2d4;box-shadow: unset; border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px;cursor: pointer;"
                                                            [routerLink]="['/pages/my-programmes/course',item._id]">
                                                                <div class="card-body text-center" style="padding:8px;">
                                                                    <h4 class="mb-0 fs-14" style="font-weight: unset;">{{item.programId?.title}}</h4>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                        <hr style="margin: 14px;">
                                        <div class="row">
                                            <div class="col-lg-4 col-md-3">
                                                <h4 class="fs-19 mt-2" style="font-weight: unset;margin-left: 14px;">{{'Recent Modules' | translate}}</h4>
                                            </div>
                                            <div class="col-lg-8 col-md-9">
                                                <div class="row">
                                                    <ng-container *ngFor="let item of modules;let i=index">
                                                        <div class="col-lg-6 col-md-6" *ngIf="i < 2">
                                                            <div class="card" id="box" style="background-color: #d1d2d4;box-shadow: unset;border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px; cursor: pointer;"
                                                            [routerLink]="['/pages/my-modules']">
                                                                <div class="card-body text-center" style="padding:8px;">
                                                                    <h4 class="mb-0 fs-14" style="font-weight: unset;">{{item.moduleId?.title}}</h4>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                        <hr style="margin: 14px;">
                                        <div class="row">
                                            <div class="col-lg-4 col-md-3">
                                                <h4 class="fs-19 mt-2" style="font-weight: unset;margin-left: 14px;">{{'Recent Activities' | translate}}</h4>
                                            </div>
                                            <div class="col-lg-8 col-md-9">
                                                <div class="row">
                                                    <ng-container *ngFor="let item of activities;let i=index">
                                                        <div class="col-lg-6 col-md-6" *ngIf="i < 2">
                                                            <div class="card" id="box" style="background-color: #d1d2d4;box-shadow: unset;border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px; cursor: pointer;"
                                                            [routerLink]="['/pages/my-learning-activities/course',i]">
                                                                <div class="card-body text-center" style="padding:8px;">
                                                                    <h4 class="mb-0 fs-14" style="font-weight: unset;">{{item.programId?.title}}</h4>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-8 col-md-8">
                                <div class="card card-height-100">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-lg-6 col-md-6">
                                                <div class="flatpickr-input" type="text" mwlFlatpickr (change)="getDate($event)"
                                                [altInput]="true" [convertModelValue]="true"
                                                [inline]="true"></div>
                                            </div>
                                            <div class="col-lg-6 col-md-6">
                                                <h2 class="mt-3" style="font-weight: unset;color:#cd5e29;">{{currentSelectedDate | date:'dd'}} 
                                                    <span class="fs-18" style="text-transform: uppercase;color:black;">{{currentSelectedDate | date:'MMMM'}}</span><br> 
                                                    <span class="fs-18"  style="color:black;">{{currentSelectedDate | date:'EEEE'}}</span>
                                                </h2>
                                                <div style="height: 220px; overflow:overlay;">
                                                    <div class="card" *ngFor="let item of pevents" id="box2" style="background-color: #cd5e29;border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px;">
                                                        <div class="card-body" style="padding:8px; cursor: pointer;" *ngIf="!item.programId?.isWatch" [routerLink]="['/pages/my-programmes/course',item._id]">
                                                            <i class="ri-arrow-right-s-line text-white fs-13" style="float: right;font-weight: bold;"></i>
                                                            <h4 class="mb-0 fs-16 text-white" style="font-weight: unset;">{{(item.programId?.title != undefined)?item.programId?.title:'-'}}</h4>
                                                        </div>
                                                    </div>
                                                    <div class="card" *ngFor="let item of cevents" id="box2" style="background-color: #cd5e29;border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px;">
                                                        <div class="card-body" style="padding:8px; cursor: pointer;" *ngIf="!item.courseId?.isWatch" [routerLink]="['/pages/my-courses/module',item._id]">
                                                            <i class="ri-arrow-right-s-line text-white fs-13" style="float: right;font-weight: bold;"></i>
                                                            <h4 class="mb-0 fs-16 text-white" style="font-weight: unset;">{{(item.courseId?.title != undefined)?item.courseId?.title:'-'}}</h4>
                                                        </div>
                                                    </div>
                                                    <div class="card" *ngFor="let item of mevents" id="box2" style="background-color: #cd5e29;border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px;">
                                                        <div class="card-body" style="padding:8px; cursor: pointer;" *ngIf="!item.moduleId?.isWatch" [routerLink]="['/pages/my-modules']">
                                                            <i class="ri-arrow-right-s-line text-white fs-13" style="float: right;font-weight: bold;"></i>
                                                            <h4 class="mb-0 fs-16 text-white" style="font-weight: unset;">{{(item.moduleId?.title != undefined)?item.moduleId?.title:'-'}}</h4>
                                                        </div>
                                                    </div>
                                                    <div class="card" *ngFor="let item of aevents;" id="box2" style="background-color: #cd5e29;border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px;">
                                                        <div class="card-body" style="padding:8px;" *ngIf="!item.programId?.isWatch" [routerLink]="['/pages/my-learning-activities/course',item._id]">
                                                            <i class="ri-arrow-right-s-line text-white fs-13" style="float: right;font-weight: bold;"></i>
                                                            <h4 class="mb-0 fs-16 text-white" style="font-weight: unset;">{{(item.programId?.title != undefined)?item.programId?.title:'-'}}</h4>
                                                        </div>
                                                    </div>
                                                    <div *ngIf="pevents.length == 0 && cevents.length == 0 && mevents.length == 0 && aevents.length == 0" class="card" id="box2" style="background-color: #cd5e29;border-radius: 10px 0px 10px 0px !important; margin-bottom: 10px;">
                                                        <div class="card-body text-center" style="padding:8px;">
                                                            <h4 class="mb-0 fs-16 text-white" style="font-weight: unset;">{{'No Events Found' | translate}}</h4>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4">
                                <div class="card card-height-100">
                                    <div class="card-body" style="padding:unset;">
                                        <h4 class="card-title text-center mb-0 mt-4 fw-bolder fs-14" style="color: #6d6e72;">{{'Training Glimpses'|translate}}</h4>
                                        <hr style="margin: 5px 20% 20px;">
                                        <!-- Controls carousel -->
                                        <ngb-carousel [showNavigationArrows]="true" [animation]="true" style="margin: 5px;border-radius:10px;">
                                        <ng-template ngbSlide *ngFor="let item of trainingGlimpses;let i=index">
                                            <img src="{{item.image}}" style="height: 200px;width: 100%;" alt="first slide" onerror="this.src='assets/images/404-error.png';" class="d-block">
                                        </ng-template>
                                        </ngb-carousel>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-12 d-flex align-items-stretch">
                    
                    <div class="card w-100" style="background-color: #f7f6f6;border-radius: unset;">
                        <div><h4 class=" winner fs-17 text-white" style="margin: 0 !important;"><p>Winner's Corner</p></h4></div>
                        <div class="card-body d-flex flex-column">
                            <ng-container>
                                <ng-container *ngIf="!resultAnnouncing">
                                    <p class="mb-1 fs-14 fw-semibold" style="color: #6d6e72; text-transform: uppercase;" *ngIf="trainingday != undefined">
                                        <img src="assets/images/new/check.png" class="me-2" width="15px">{{trainingday?.programId?.title}}
                                    </p>
                                    <div style="height: 420px; overflow: overlay;">
                                        <ng-container *ngFor="let data of trainingday?.winners;let index=index">
                                            <div class="card" *ngIf="index < 10 && data.top10"  style="background-color: #fff;box-shadow:unset;border:1px solid #d1d2d4; margin-bottom: 10px;">
                                                <div class="card-body" style="padding: 3px;">
                                                    <div class="d-flex">
                                                        <div class="flex-shink-0" style="position: relative;text-align: center;color: white;">
                                                            <img alt=""  style="width:3rem;" class="avatar-sm object-cover rounded" onerror="this.src='assets/images/users/user.png';" src="{{data.employeeId?.profilephoto}}">
                                                            <div class="top-right" style="background-color: white;width: 20px;height: 20px;filter: blur(8px);"></div>
                                                            <img class="top-right" *ngIf="index == 0" src="assets/images/1medal.png">
                                                            <img class="top-right" *ngIf="index == 1" src="assets/images/2medal.png">
                                                            <img class="top-right" *ngIf="index == 2" src="assets/images/3medal.png">
                                                            <img class="top-right" *ngIf="index == 3" src="assets/images/4medal.png">
                                                            <img class="top-right" *ngIf="index == 4" src="assets/images/5medal.png">
                                                            <img class="top-right" *ngIf="index == 5" src="assets/images/6medal.png">
                                                            <img class="top-right" *ngIf="index == 6" src="assets/images/7medal.png">
                                                            <img class="top-right" *ngIf="index == 7" src="assets/images/8medal.png">
                                                            <img class="top-right" *ngIf="index == 8" src="assets/images/9medal.png">
                                                            <img class="top-right" *ngIf="index == 9" src="assets/images/10medal.png">
                                                        </div>
                                                        <div class="ms-3 flex-grow-1">
                                                            <a >
                                                                {{data.employeeId?.firstName}} {{data.employeeId?.lastName}}, {{data.employeeId?.designation}}
                                                            </a>
                                                            <p class="text-muted mb-0">
                                                                <img src="assets/images/champion.png" width="20px">{{data.employeeId?.department}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                    <div class="text-center mt-3" *ngIf="trainingday != undefined">
                                        <button class="btn btn-dark text-center" [routerLink]="['/pages/top-winners',trainingday?.quizId?._id]" style="padding: 3px 10px; background-color:#494d50;">{{'Click for Top 100' | translate}}</button>
                                    </div>
                                    <hr style="margin: 10px 20% 10px;">
                                </ng-container>
                                <ng-container *ngIf="resultAnnouncing">
                                    <div>
                                        <img src="assets/images/waitingforresult.png" style="width:100%; height:auto">
                                        <h6 class="text-center">Top 10 result of <b>{{resultAnnouceQuiz.title}}</b> will be declared on <b>{{resultAnnouceTime | date:'hh:mm:ss'}}</b></h6>
                                    </div>
                                </ng-container>
                            </ng-container>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- end col -->

    <div class="col-xxl-2 col-xl-2 col-lg-12 col-md-12 col-sm-12 h-100">
        <div class="card card-height-100 mb-0" style="background-color: transparent; box-shadow:unset;">
            <div class="row">
                <div class="col-xxl-12 col-xl-12 col-lg-4 col-md-6 col-sm-12 col-xs-12">
                    <div class="card card-height-100" >
                        <div style="position: relative;text-align: center;color: white;margin: 7px;">
                            <img alt="" height="150" class="card-img-top" style="object-fit:fill;width: 100%;" src="{{chairman.photo}}">
                            <h4 class="bottom-right bod fs-13 text-white" style="margin: 0 !important; text-align: right;">
                                <p>{{'Mr. Devesh Sachdev' | translate}}</p>
                                <p style="padding-top: unset;">{{'MD & CEO' | translate}}</p>
                            </h4>
                        </div>
                        <div class="card-body" style="padding:7px;">
                            <p style="margin-bottom: 10px;" class="cmsg" [innerHTML]="chairman.description"></p>
                            <a style="display:block;text-align:right; text-decoration: underline !important;font-size: 11px;color: #1e1e1e;" [routerLink]="['/pages/ceo']">{{'Click to know more' | translate}}</a>
                        </div>
                    </div>
                </div>
                <div class="col-xxl-12 col-xl-12 col-lg-4 col-md-6 col-sm-12 col-xs-12">
                    <div class="card card-height-100">
                        <div class="card-body" style="padding:unset;">
                            <h4 class="card-title text-center fs-14 mb-0 mt-3 fw-semibold" style="color: #6d6e72;">{{'News Feeds' | translate}}</h4>
                            <hr style="margin: 5px 20%;">
                            <ng-container *ngFor="let item of news;let i=index">
                                <div style="padding: 5px;" *ngIf="i < 1">
                                    <h4 class="fusionnews fs-17 text-white" style="margin: 0 !important;"><p>{{'Fusion News' | translate}}</p></h4>
                                    <div class="card" style="background-color: #fff;box-shadow:unset;margin-top: 5px;margin-bottom: unset;">
                                        <div class="card-body" style="padding: unset;">
                                            <div class="row">
                                                <div class="col-xxl-6 col-xl-6 col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                    <img alt="" style="width:100%;object-fit: fill;" class="avatar-lg rounded" src="{{item.photo}}">
                                                </div>
                                                <div class="col-xxl-6 col-xl-6 col-lg-8 col-md-8 col-sm-8 col-xs-8 newsPadding" style="padding-left: unset;">
                                                    <p class="mb-0 fs-11 news" [innerHTML]="item.description">
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                            <ng-container *ngFor="let item of othernews;let i=index">
                                <div style="padding: 5px;" *ngIf="i < 1">
                                    <h4 class="fusionnews fs-17 text-white" style="margin: 0 !important;"><p>{{'Others' | translate}}</p></h4>
                                    <div class="card" style="background-color: #fff;box-shadow:unset;margin-top: 5px;margin-bottom: unset;">
                                        <div class="card-body" style="padding: unset;">
                                            <div class="row">
                                                <div class="col-xxl-6 col-xl-6 col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                                    <img alt="" style="width:100%;object-fit: fill;" class="avatar-lg rounded" src="{{item.photo}}">
                                                </div>
                                                <div class="col-xxl-6 col-xl-6 col-lg-8 col-md-8 col-sm-8 col-xs-8 newsPadding" style="padding-left: unset;">
                                                    <p class="mb-0 fs-11 news" [innerHTML]="item.description">
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="news.length == 0 && othernews.length == 0">
                                <div style="padding: 5px;">
                                    <h4 class="fusionnews fs-14 text-white" style="margin: 0 !important;width:80%; "><p>{{'No News Found' | translate}}</p></h4>
                                </div>
                            </ng-container>
                            <a style="float:right; text-decoration: underline !important;font-size: 11px;padding:0px 10px 10px;color: #1e1e1e;" [routerLink]="['/pages/news']">{{'Know More' | translate}}</a>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
       
       
    </div><!-- end col -->

</div>

<ng-template #termscondModal let-modal>
    <div class="modal-header d-block">
        <h5 class="modal-title text-center">PLEASE READ AND ACCEPT <br>THE GENERAL TERMS OF USE</h5>
    </div>
    <div class="modal-body">
        <div class="pe-3 ps-3" style="letter-spacing: 0.2px;line-height: 22px;">
            <h5 class="mb-3">To continue using the Application, you must read and accept our Terms of Use and Privacy Policy. You can exit the application now, but this message will reappear until it is accepted.</h5>
            <h5>By Clicking <b>“I Agree”</b>, you acknowledge that you have read and accepted the Fusion Gurukul’s <a href="assets/Privacy-Policy.pdf" target="_blank">Terms and Conditions</a> and <a href="assets/Privacy-Policy.pdf" target="_blank">Privacy Policy</a></h5>
        </div>
        <div class="hstack gap-2 justify-content-center mt-4">
            <button class="btn btn-danger" (click)="iAgree()">{{'I Agree' | translate}}</button>
        </div>
    </div>
</ng-template>