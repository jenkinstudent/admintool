<!-- Start Breadcrumbs -->
<app-breadcrumbs title="Rent" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>
<!-- End Breadcrumbs -->

<div class="row">
    <div class="col-lg-12">
        <div class="card" >
            <div class="card-body border border-dashed border-end-0 border-start-0">
                <form>
                    <div class="row g-3">
                        <div class="col-xxl-4 col-sm-4">
                            <div class="search-box">
                                <input type="text" name="searchTerm" class="form-control"
                                    placeholder="Search for tasks or something..." (keyup)="search($event)">
                                <i class="ri-search-line search-icon"></i>
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-xxl-4 col-sm-4">
                            <input type="text" placeholder="From date to To date" class="form-control bg-white"
                                [(ngModel)]="selectedDate" [ngModelOptions]="{standalone: true}"
                                (change)="onSelectedDate($event)" mwlFlatpickr [altInput]="true"
                                [convertModelValue]="true" mode="range">
                        </div>
                        <div class="col-xxl-4 col-sm-4">
                            <button class="btn btn-primary me-2" *ngIf="selectedDate || searchTerm"
                                (click)="clear()">Clear</button>
                            <button class="btn btn-outline-primary me-2" [disabled]="printData.length == 0" style="float:right;"
                            (click)="exportData()">Export</button>
                            <button *ngIf="authS.currentUserValue.designation.id == 'L2-Admin'"
                            class="btn btn-primary me-2" style="float:right;"
                            (click)="openModal1(adminbulkapprove)">Bulk Approve</button>
                        <button *ngIf="authS.currentUserValue.designation.id == 'L2-Finance'"
                            class="btn btn-primary me-2" style="float:right;"
                            (click)="openModal1(financebulkapprove)">Bulk Approve</button>
                        </div>
                        
                    </div><!--end row-->
                </form>
            </div><!--end card-body-->
            <div class="card-body">
                
                <ul ngbNav #nav="ngbNav" [activeId]="activeId" class="nav nav-tabs nav-tabs-custom nav-primary mb-3">
                    <li [ngbNavItem]="1" *ngIf="authS.currentUserValue.designation.id != 'L1-Finance' && authS.currentUserValue.designation.id != 'L2-Finance'">
                        <a ngbNavLink>
                         Pending To Be Raised
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive table-card mb-2">
                                <table class="table">
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th scope="col">Action</th>
                                            <th scope="col">Branch</th>
                                            <th scope="col">Premises Type</th>
                                            <th scope="col">State</th>
                                            <th scope="col">Zone</th>
                                            <th scope="col">Landlord Name</th>
                                            <th scope="col">Monthly Rent</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of data | filter:searchTerm;let i=index">
                                            <tr *ngIf="item.adminStatus == 'Pending'">
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" *ngIf="authS.currentUserValue.designation.id == 'L1-Admin'">
                                                        <li class="list-inline-item edit me-0">
                                                            <button [routerLink]="['/admin/rent-raised/create',item._id]"
                                                                class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                                Raise
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.rent?.premisesType}}</td>
                                                <td scope="col">{{item.rent?.state}}</td>
                                                <td scope="col">{{item.rent?.zone}}</td>
                                                <td scope="col">{{item.rent?.landlordName}}</td>
                                                <td scope="col">â‚¹ {{item.rent?.monthlyRent}}</td>
                                            </tr>
                                        </ng-container>
                                      
                                        
                                    </tbody>
                                </table>
                            </div>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="2" *ngIf="authS.currentUserValue.designation.id != 'L1-Finance' && authS.currentUserValue.designation.id != 'L2-Finance'">
                        <a ngbNavLink >
                           Raised
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive mb-2">
                                <table class="table table-nowrap align-middle mb-0 ">
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th>Action</th>
                                            <th>Branch</th>
                                            <th>Date</th>
                                            <th>Pending Arrear</th>
                                            <th>Waiver</th>
                                            <th>Deduction</th>
                                            <th>Total Transfer Rent</th>
                                            <th>Increment</th>
                                            <th>Expiry Date</th>
                                            <th>Admin Approval</th>
                                            <th>Finance Approval</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of allrentbills | filter:searchTerm;let i=index">
                                            <tr *ngIf="item.adminStatus == 'Pending' && item.financeStatus == 'Pending'">
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" >
                                                        <li *ngIf="item?.adminStatus == 'Approved'"
                                                        ngbTooltip="{{item?.adminStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.adminStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.adminRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Approved'"
                                                        ngbTooltip="{{item?.financeStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.financeRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                        <li ngbTooltip="Details" placement="top" class="list-inline-item edit me-2" [routerLink]="['/admin/rent-transaction-details',item._id]">
                                                            <button 
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-eye-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                        <li ngbTooltip="Activity" *ngIf="item?.adminStatus != 'Rejected' "
                                                            placement="top" class="list-inline-item edit me-0">
                                                            <button (click)="openModal(fullDataModal,item)"
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-pages-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.createdAt | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col">â‚¹ {{item.pendingArrear}}</td>
                                                <td scope="col">â‚¹ {{item.waiver}}</td>
                                                <td scope="col">â‚¹ {{item.deduction}}</td>
                                                <td scope="col">â‚¹ {{item.totalTransferRent}}</td>
                                                <td scope="col">â‚¹ {{item.increment}}</td>
                                                <td scope="col">{{item.expiryDate | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col"><span *ngIf="item.adminStatus == 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.adminApproved?.name}}" placement="top" *ngIf="item.adminStatus == 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col"><span *ngIf="item.financeStatus== 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.financeApproved?.name}}" placement="top"*ngIf="item.financeStatus== 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                    
                                            </tr>
                                        </ng-container>
                                    </tbody>
                                </table>
                            </div>
                            
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="3">
                        <a ngbNavLink >
                            Approved
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive mb-2" >
                                <table class="table table-nowrap align-middle mb-0 ">
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th>Action</th>
                                            <th>Branch</th>
                                            <th>Date</th>
                                            <th>Pending Arrear</th>
                                            <th>Waiver</th>
                                            <th>Deduction</th>
                                            <th>Total Transfer Rent</th>
                                            <th>Increment</th>
                                            <th>Expiry Date</th>
                                            <th>Admin Approval</th>
                                            <th>Finance Approval</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of allrentbills | filter:searchTerm;let i=index">
                                            <tr *ngIf="item.adminStatus == 'Approved' && item.financeStatus == 'Pending'">
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" >
                                                        <li *ngIf="item?.adminStatus == 'Approved'"
                                                        ngbTooltip="{{item?.adminStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.adminStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.adminRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Approved'"
                                                        ngbTooltip="{{item?.financeStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.financeRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                        <li ngbTooltip="Details" placement="top" class="list-inline-item edit me-2" [routerLink]="['/admin/rent-transaction-details',item._id]">
                                                            <button 
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-eye-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                        
                                                        <li ngbTooltip="Activity" *ngIf="item?.adminStatus != 'Rejected' "
                                                            placement="top" class="list-inline-item edit me-0">
                                                            <button (click)="openModal(fullDataModal,item)"
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-pages-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.createdAt | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col">â‚¹ {{item.pendingArrear}}</td>
                                                <td scope="col">â‚¹ {{item.waiver}}</td>
                                                <td scope="col">â‚¹ {{item.deduction}}</td>
                                                <td scope="col">â‚¹ {{item.totalTransferRent}}</td>
                                                <td scope="col">â‚¹ {{item.increment}}</td>
                                                <td scope="col">{{item.expiryDate | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col"><span *ngIf="item.adminStatus == 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.adminApproved?.name}}" placement="top" *ngIf="item.adminStatus == 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col"><span *ngIf="item.financeStatus== 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.financeApproved?.name}}" placement="top"*ngIf="item.financeStatus== 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>

                                            </tr>
                                        </ng-container>
                                      
                                        
                                    </tbody>
                                </table>
                            </div>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="4">
                        <a ngbNavLink >
                            Rejected
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive mb-2" >
                                <table class="table table-nowrap align-middle mb-0">
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th>Action</th>
                                            <th>Branch</th>
                                            <th>Date</th>
                                            <th>Pending Arrear</th>
                                            <th>Waiver</th>
                                            <th>Deduction</th>
                                            <th>Total Transfer Rent</th>
                                            <th>Increment</th>
                                            <th>Expiry Date</th>
                                            <th>Admin Approval</th>
                                            <th>Finance Approval</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of allrentbills | filter:searchTerm;let i=index">
                                            <tr *ngIf="item.adminStatus == 'Rejected' || item.financeStatus == 'Rejected'">
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" >
                                                        <li *ngIf="item?.adminStatus == 'Approved'"
                                                        ngbTooltip="{{item?.adminStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.adminStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.adminRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Approved'"
                                                        ngbTooltip="{{item?.financeStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.financeRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                        <li ngbTooltip="Details" placement="top" class="list-inline-item edit me-2" [routerLink]="['/admin/rent-raised/edit',item._id]">
                                                            <button 
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-pencil-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                        <li ngbTooltip="Activity" *ngIf="item?.adminStatus != 'Rejected' "
                                                            placement="top" class="list-inline-item edit me-0">
                                                            <button (click)="openModal(fullDataModal,item)"
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-pages-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.createdAt | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col">â‚¹ {{item.pendingArrear}}</td>
                                                <td scope="col">â‚¹ {{item.waiver}}</td>
                                                <td scope="col">â‚¹ {{item.deduction}}</td>
                                                <td scope="col">â‚¹ {{item.totalTransferRent}}</td>
                                                <td scope="col">â‚¹ {{item.increment}}</td>
                                                <td scope="col">{{item.expiryDate | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col"><span *ngIf="item.adminStatus == 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.adminApproved?.name}}" placement="top" *ngIf="item.adminStatus == 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col"><span *ngIf="item.financeStatus== 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.financeApproved?.name}}" placement="top"*ngIf="item.financeStatus== 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                            </tr>
                                        </ng-container>
                                      
                                        
                                    </tbody>
                                </table>
                            </div>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="5">
                        <a ngbNavLink >
                           Rework
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive mb-2" >
                                <table class="table table-nowrap align-middle mb-0 ">
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th>Action</th>
                                            <th>Branch</th>
                                            <th>Date</th>
                                            <th>Pending Arrear</th>
                                            <th>Waiver</th>
                                            <th>Deduction</th>
                                            <th>Total Transfer Rent</th>
                                            <th>Increment</th>
                                            <th>Expiry Date</th>
                                            <th>Admin Approval</th>
                                            <th>Finance Approval</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of allrentbills | filter:searchTerm;let i=index">
                                            <tr *ngIf="item.rework">
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" >
                                                        <li *ngIf="item?.adminStatus == 'Approved'"
                                                        ngbTooltip="{{item?.adminStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.adminStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.adminRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Approved'"
                                                        ngbTooltip="{{item?.financeStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.financeRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                        <li ngbTooltip="Details" placement="top" class="list-inline-item edit me-2" [routerLink]="['/admin/rent-transaction-details',item._id]">
                                                            <button 
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-eye-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                        <li ngbTooltip="Activity" *ngIf="item?.adminStatus != 'Rejected' "
                                                            placement="top" class="list-inline-item edit me-0">
                                                            <button (click)="openModal(fullDataModal,item)"
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-pages-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.createdAt | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col">â‚¹ {{item.pendingArrear}}</td>
                                                <td scope="col">â‚¹ {{item.waiver}}</td>
                                                <td scope="col">â‚¹ {{item.deduction}}</td>
                                                <td scope="col">â‚¹ {{item.totalTransferRent}}</td>
                                                <td scope="col">â‚¹ {{item.increment}}</td>
                                                <td scope="col">{{item.expiryDate | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col"><span *ngIf="item.adminStatus == 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.adminApproved?.name}}" placement="top" *ngIf="item.adminStatus == 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col"><span *ngIf="item.financeStatus== 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.financeApproved?.name}}" placement="top"*ngIf="item.financeStatus== 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                            </tr>
                                        </ng-container>
                                      
                                        
                                    </tbody>
                                </table>
                            </div>
                        </ng-template>
                    </li>
                    <li [ngbNavItem]="6">
                        <a ngbNavLink >
                            Payment In-Process
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive mb-2" >
                                <table class="table table-nowrap align-middle mb-0 ">
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th>Action</th>
                                            <th>Branch</th>
                                            <th>Date</th>
                                            <th>Pending Arrear</th>
                                            <th>Waiver</th>
                                            <th>Deduction</th>
                                            <th>Total Transfer Rent</th>
                                            <th>Increment</th>
                                            <th>Expiry Date</th>
                                            <th>Admin Approval</th>
                                            <th>Finance Approval</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of allrentbills | filter:searchTerm;let i=index">
                                            <tr *ngIf="item.adminStatus == 'Approved' && item.financeStatus == 'Approved'">
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" >
                                                        <li *ngIf="item?.adminStatus == 'Approved'"
                                                        ngbTooltip="{{item?.adminStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.adminStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.adminRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Approved'"
                                                        ngbTooltip="{{item?.financeStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.financeRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                        <li ngbTooltip="Details" placement="top" class="list-inline-item edit me-2" [routerLink]="['/admin/rent-transaction-details',item._id]">
                                                            <button 
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-eye-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                        <li ngbTooltip="Activity" *ngIf="item?.adminStatus != 'Rejected' "
                                                            placement="top" class="list-inline-item edit me-0">
                                                            <button (click)="openModal(fullDataModal,item)"
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-pages-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.createdAt | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col">â‚¹ {{item.pendingArrear}}</td>
                                                <td scope="col">â‚¹ {{item.waiver}}</td>
                                                <td scope="col">â‚¹ {{item.deduction}}</td>
                                                <td scope="col">â‚¹ {{item.totalTransferRent}}</td>
                                                <td scope="col">â‚¹ {{item.increment}}</td>
                                                <td scope="col">{{item.expiryDate | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col"><span *ngIf="item.adminStatus == 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.adminApproved?.name}}" placement="top" *ngIf="item.adminStatus == 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col"><span *ngIf="item.financeStatus== 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.financeApproved?.name}}" placement="top"*ngIf="item.financeStatus== 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                            </tr>
                                        </ng-container>
                                      
                                        
                                    </tbody>
                                </table>
                            </div>
                        </ng-template>
                    </li>
                    <!-- <li [ngbNavItem]="2">
                        <a ngbNavLink >
                           Current Month
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive table-card" >
                                <table class="table" #table2>
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th>Branch</th>
                                            <th>Date</th>
                                            <th>Pending Arrear</th>
                                            <th>Waiver</th>
                                            <th>Deduction</th>
                                            <th>Total Transfer Rent</th>
                                            <th>Increment</th>
                                            <th>Expiry Date</th>
                                            <th>Admin Approval</th>
                                            <th>Finance Approval</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of rentbills | filter:searchTerm;let i=index">
                                            <tr >
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.createdAt | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col">â‚¹ {{item.pendingArrear}}</td>
                                                <td scope="col">â‚¹ {{item.waiver}}</td>
                                                <td scope="col">â‚¹ {{item.deduction}}</td>
                                                <td scope="col">â‚¹ {{item.totalTransferRent}}</td>
                                                <td scope="col">â‚¹ {{item.increment}}</td>
                                                <td scope="col">{{item.expiryDate | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col"><span *ngIf="item.adminStatus == 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.adminApproved?.name}}" placement="top" *ngIf="item.adminStatus == 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col"><span *ngIf="item.financeStatus== 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span  ngbTooltip="Approve By {{item.financeApproved?.name}}" placement="top" *ngIf="item.financeStatus== 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" >
                                                        <li ngbTooltip="Details" placement="top" class="list-inline-item edit me-0" [routerLink]="['/admin/rent-transaction-details',item._id]">
                                                            <button 
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-eye-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                        
                                                    </ul>
                                                </td>
                                            </tr>
                                        </ng-container>
                                      
                                        
                                    </tbody>
                                </table>
                            </div>
                        </ng-template>
                    </li> -->
                    <li [ngbNavItem]="7">
                        <a ngbNavLink >
                           All
                        </a>
                        <ng-template ngbNavContent>
                            <div class="table-responsive mb-2" >
                                <table class="table table-nowrap align-middle mb-0 " >
                                    <thead class="table-light text-muted">
                                        <tr>
                                            <th>Action</th>
                                            <th>Branch</th>
                                            <th>Date</th>
                                            <th>Pending Arrear</th>
                                            <th>Waiver</th>
                                            <th>Deduction</th>
                                            <th>Total Transfer Rent</th>
                                            <th>Increment</th>
                                            <th>Expiry Date</th>
                                            <th>Admin Approval</th>
                                            <th>Finance Approval</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of allrentbills | filter:searchTerm;let i=index">
                                            <tr >
                                                <td scope="col">
                                                    <ul class="list-inline hstack gap-0 mb-0" >
                                                        <li *ngIf="item?.adminStatus == 'Approved'"
                                                        ngbTooltip="{{item?.adminStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.adminStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.adminRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Approved'"
                                                        ngbTooltip="{{item?.financeStatusRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-fill fs-18"></i>
                                                        </button>
                                                    </li>
                                                    <li *ngIf="item?.financeStatus == 'Rejected'"
                                                        ngbTooltip="{{item?.financeRejectRemark}}" placement="top"
                                                        class="list-inline-item edit me-2">
                                                        <button
                                                            class=" btn btn-ghost-success text-success d-inline-block edit-item-btn p-0">
                                                            <i class="ri-message-line fs-18"></i>
                                                        </button>
                                                    </li>
                                                        <li ngbTooltip="Details" placement="top" class="list-inline-item edit me-2" [routerLink]="['/admin/rent-transaction-details',item._id]">
                                                            <button 
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-eye-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                        <li ngbTooltip="Activity" *ngIf="item?.adminStatus != 'Rejected' "
                                                            placement="top" class="list-inline-item edit me-0">
                                                            <button (click)="openModal(fullDataModal,item)"
                                                                class=" btn btn-ghost-primary text-primary d-inline-block edit-item-btn p-0">
                                                                <i class="ri-pages-line fs-18"></i>
                                                            </button>
                                                        </li>
                                                    </ul>
                                                </td>
                                                <td scope="col">#{{item.rent?.branchCode}} - {{item.rent?.branchName}}</td>
                                                <td scope="col">{{item.createdAt | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col">â‚¹ {{item.pendingArrear}}</td>
                                                <td scope="col">â‚¹ {{item.waiver}}</td>
                                                <td scope="col">â‚¹ {{item.deduction}}</td>
                                                <td scope="col">â‚¹ {{item.totalTransferRent}}</td>
                                                <td scope="col">â‚¹ {{item.increment}}</td>
                                                <td scope="col">{{item.expiryDate | date:'dd MMM, yyyy'}}</td>
                                                <td scope="col"><span *ngIf="item.adminStatus == 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.adminApproved?.name}}" placement="top" *ngIf="item.adminStatus == 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                                <td scope="col"><span *ngIf="item.financeStatus== 'Pending'" class="badge rounded-pill bg-warning">Pending</span>
                                                    <span ngbTooltip="Approve By {{item.financeApproved?.name}}" placement="top"*ngIf="item.financeStatus== 'Approved'" class="badge rounded-pill bg-success">Approve</span></td>
                                            </tr>
                                        </ng-container>
                                      
                                        
                                    </tbody>
                                </table>
                            </div>
                        </ng-template>
                    </li>
                  </ul>
                
                  <!-- Tab panes -->
                  <div class="tab-content text-muted">
                    <div [ngbNavOutlet]="nav"></div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-md-6"></div>
                    <div class="col-sm-12 col-md-6">
                        <div class="text-md-right float-md-end ">
                            <ul class="pagination">
                                <li class="page-item me-2">
                                    <button class="btn btn-sm btn-soft-primary" [disabled]="page==1"
                                        (click)="previousPage()">
                                        <span aria-hidden="true"><i
                                                class="ri-arrow-left-s-line fs-18"></i></span>
                                    </button>
                                </li>
                                <li class="page-item me-2">
                                    <button class="btn btn-sm btn-soft-primary" [disabled]="!hasMore"
                                        (click)="nextPage()">
                                        <span aria-hidden="true"><i
                                                class="ri-arrow-right-s-line fs-18"></i></span>
                                    </button>
                                </li>
                                <li class="page-item" *ngIf="loading">
                                    <span class="spinner-border flex-shrink-0" role="status"><span
                                            class="visually-hidden">Loading...</span></span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-template #fullDataModal let-modal>
    <app-tracking-modal  type="rent" id="{{item._id}}"></app-tracking-modal>
</ng-template>

<ng-template #adminbulkapprove let-modal>
    <app-rent-bulkapprove type="admin"></app-rent-bulkapprove>
</ng-template>

<ng-template #financebulkapprove let-modal>
    <app-rent-bulkapprove type="finance"></app-rent-bulkapprove>
</ng-template>